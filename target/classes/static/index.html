<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Form</title>

<style>
label, input {
	display: block;
}

label {
	margin-bottom: 20px;
}
</style>


<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>



	<div
		style="border: 1px solid #D0D0D0; padding: 10px; float: left"">

		<button type="button" id="createPackage">Create Package</button>
		<button type="button" id="createSession1" style="display: none;">Create
			Session 1</button>
		<button type="button" id="createSession2" style="display: none;">Create
			Session 2</button>

	</div>

	<div id="designerDiv"
		style="border: 1px; display: none; width: 75%; position: absolute; right: 10px; top: 10px; bottom: 10px">
		<iframe id="designerIframe" src="" style="width: 100%; height: 100%;"></iframe>
	</div>


	<script type="text/javascript">
		var pkgId = '';

		$("#createPackage").click(function(event) {
			event.preventDefault();
			$.ajax({
				url : '/oss/createPackage',
				type : 'POST',
				contentType : 'application/json',
				success : function(data) {
					console.log(data)
					$('#createPackage').css('display', 'none');
					$('#createSession1').css('display', 'block');
					$('#createSession2').css('display', 'block');
					pkgId = data.packageId;
				}
			});
		});

		$("#createSession1").click(function(event) {
			event.preventDefault();
			$.ajax({
				url : '/oss/createSession1',
				type : 'POST',
				data: JSON.stringify({
			           "pkgId":pkgId
			         }),
				contentType : 'application/json',
				success : function(data) {
					console.log(data)
					$('#designerIframe').attr('src', data.signingUrl);
					$('#designerDiv').css('display', 'block');
				}
			});
		});
		
		
		$("#createSession2").click(function(event) {
			event.preventDefault();
			$.ajax({
				url : '/oss/createSession2',
				type : 'POST',
				data: JSON.stringify({
					 "pkgId":pkgId
			         }),
				contentType : 'application/json',
				success : function(data) {
					console.log(data)
					$('#designerIframe').attr('src', data.signingUrl);
					$('#designerDiv').css('display', 'block');
				}
			});
		});
		
	</script>

</body>
</html>